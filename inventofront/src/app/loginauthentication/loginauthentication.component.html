<!-- Button to trigger the modal -->
<div *ngIf="!loginDisplay">
  <button class="btn btn-outline-success w-100" (click)="openLoginModal(loginModal)">Login</button>
</div>
<div *ngIf="loginDisplay">
  <button class="btn btn-outline-danger w-100" (click)="logout()">Logout</button>
</div>

<!-- Login Modal -->
<ng-template #loginModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title">Login Options</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <div *ngIf="!showEmailLoginForm">
      <button class="btn btn-outline-primary w-100 mb-3 d-flex align-items-center justify-content-center" (click)="loginWithMs()">
        <i class="bi bi-microsoft me-2"></i> Login with Microsoft
      </button>
      <button class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-center" (click)="showEmailLogin()">
        <i class="bi bi-envelope me-2"></i> Login with Email
      </button>
    </div>
    <div *ngIf="showEmailLoginForm">
      <form (ngSubmit)="loginWithEmail(modal)">
        <div class="form-group mb-3">
          <label for="email">Email:</label>
          <input type="email" id="email" class="form-control" [(ngModel)]="email" name="email" required>
        </div>
        <div class="form-group mb-3">
          <label for="password">Password:</label>
          <input type="password" id="password" class="form-control" [(ngModel)]="password" name="password" required>
        </div>
        <button type="submit" class="btn btn-outline-success w-100 d-flex align-items-center justify-content-center">
          <i class="bi bi-box-arrow-in-right me-2"></i> Login
        </button>
      </form>
      <button class="btn btn-outline-secondary w-100 mt-3 d-flex align-items-center justify-content-center" (click)="showLoginChoices()">
        <i class="bi bi-arrow-left me-2"></i> Back
      </button>
    </div>
  </div>
</ng-template>
